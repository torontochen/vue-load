(function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],d=0,f=[];d<i.length;d++)o=i[d],r[o]&&f.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1a85":function(e,t,a){"use strict";var n=a("8cd3"),r=a.n(n);r.a},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=s(e);return a(t)}function s(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="4678"},"4a21":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("28a5"),a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticStyle:{background:"#E8EAF6"}},[a("v-toolbar",{attrs:{fixed:"",color:"primary lighten-1",dark:""}},[a("v-toolbar-title",{staticClass:"hidden-xs-only"},[a("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[e._v("\n        Gallery\n      ")])],1),a("v-spacer"),a("v-toolbar-items",[e.user?a("v-layout",[a("v-layout",[a("v-btn",{staticClass:"primary lighten-1",attrs:{flat:""}},[e._v("Welcome!  "+e._s(e.user.username))])],1),a("v-layout",[e.user?a("v-btn",{attrs:{flat:"",to:"/addpic"}},[a("v-icon",{staticClass:"hidden-sm-only ma-1",attrs:{left:""}},[e._v("attachment")]),e._v("\n            Add Picture\n          ")],1):e._e()],1),a("v-layout",[e.user?a("v-btn",{attrs:{flat:""},on:{click:e.handleSignoutUser}},[a("v-icon",{staticClass:"hidden-sm-only ma-1",attrs:{left:""}},[e._v("exit_to_app")]),e._v("\n            Signout\n          ")],1):e._e()],1)],1):a("v-layout",e._l(e.navItems,function(t){return a("v-btn",{key:t.title,attrs:{flat:"",to:t.link}},[a("v-icon",{staticClass:"hidden-sm-only ma-1",attrs:{left:""}},[e._v(e._s(t.icon))]),e._v("\n          "+e._s(t.title)+"\n        ")],1)}),1)],1)],1),a("main",[a("v-container",{staticClass:"mt-4"},[a("transition",{attrs:{name:"fade"}},[a("router-view")],1),a("v-snackbar",{attrs:{color:"success",timeout:6e3,bottom:"",left:""},model:{value:e.authSnackbar,callback:function(t){e.authSnackbar=t},expression:"authSnackbar"}},[a("v-icon",[e._v("check_circle")]),a("h3",[e._v("You are now Signed in!")]),a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.authSnackbar=!1}}},[e._v("\n          Close\n        ")])],1),e.authError?a("v-snackbar",{attrs:{color:"warning",timeout:6e3,bottom:"",left:""},model:{value:e.authErrorSnackbar,callback:function(t){e.authErrorSnackbar=t},expression:"authErrorSnackbar"}},[a("v-icon",{staticClass:"mr-3"},[e._v("cancel")]),a("h3",[e._v(e._s(e.authError.message))]),a("v-btn",{attrs:{dark:"",flat:"",to:"/signin"}},[e._v("\n          Sign in\n        ")])],1):e._e()],1)],1)],1)},s=[],o=(a("8e6e"),a("456d"),a("bd86")),i=a("2f62"),c=a("5118");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d={name:"App",data:function(){return{authSnackbar:!1,authErrorSnackbar:!1}},watch:{user:function(e,t){null==t&&(this.authSnackbar=!0)},authError:function(e){var t=this;null!==e&&(this.authErrorSnackbar=!0,Object(c["setTimeout"])(function(){return t.badgeAnimated=!1},1e3))}},computed:u({},Object(i["b"])(["authError","user"]),{navItems:function(){var e=[{icon:"lock_open",title:"Sign In",link:"/signin"},{icon:"create",title:"Sign Up",link:"/signup"}];return e}}),methods:{handleSignoutUser:function(){this.$store.dispatch("signoutUser")}}},f=d,m=(a("1a85"),a("2877")),p=a("6544"),b=a.n(p),v=a("7496"),g=a("8336"),h=a("a523"),j=a("132d"),y=a("a722"),w=a("2db4"),O=a("9910"),k=a("71d9"),x=a("2a7f"),P=Object(m["a"])(f,r,s,!1,null,"65d4abaa",null),_=P.exports;b()(P,{VApp:v["a"],VBtn:g["a"],VContainer:h["a"],VIcon:j["a"],VLayout:y["a"],VSnackbar:w["a"],VSpacer:O["a"],VToolbar:k["a"],VToolbarItems:x["a"],VToolbarTitle:x["b"]});var S=a("8c4f"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:""}},[a("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("v-container",{attrs:{"fill-height":""}},[a("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",size:70,width:7,color:"secondary"}})],1)],1)],1)],1),e.pics?a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.pics,function(t){return a("v-flex",{key:t._id,attrs:{xs12:"",sm6:""}},[a("v-card",{staticClass:"pa-0",attrs:{hover:""}},[a("v-img",{attrs:{src:t.imageBase64,height:"50vh",lazy:""}}),a("v-card-actions",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[e._v(e._s(t.title))])])]),a("v-spacer"),e.user&&e.user.username!==t.createdBy.username?a("v-btn",{attrs:{color:"accent",floating:"",fab:"",small:"",dark:""},on:{click:function(a){return e.downloadImage(t.imageFilename)}}},[a("v-icon",[e._v("file_download")])],1):e._e(),e.user&&e.user.username==t.createdBy.username?a("v-btn",{attrs:{color:"error",floating:"",fab:"",small:"",dark:""},on:{click:function(a){return e.handleDeletePic(t._id,t.imageId)}}},[a("v-icon",[e._v("delete")])],1):e._e()],1),a("v-card-text",{staticClass:"grey lighten-4"},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("img",{attrs:{src:t.createdBy.avatar,alt:"avatar"}})]),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"text--primary"},[e._v("\n                "+e._s(t.createdBy.username)+"\n              ")]),a("v-list-tile-sub-title",{staticClass:"font-weight-this"},[e._v("\n                Added "+e._s(e.formatCreatedDate(t.createdDate))+"\n              ")])],1),a("v-list-tile-action",[a("v-btn",{attrs:{icon:"",ripple:""}},[a("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("info")])],1)],1)],1)],1)],1)],1)}),1):e._e(),a("v-layout",{attrs:{row:"","align-center":""}},[a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.downloadDialog,callback:function(t){e.downloadDialog=t},expression:"downloadDialog"}},[a("v-card",{staticClass:"pb-2"},[a("v-card-title",[a("h5",[e._v("File Is Ready to download, Click Link Below")])]),a("p",{staticClass:"text-xs-center text-md-center mb-4"},[e.downloadImagePath?a("a",{attrs:{target:"_blank",href:"download/"+e.downloadImagePath,download:""},on:{click:function(t){t.stopPropagation(),e.downloadDialog=!1}}},[e._v(e._s(e.downloadImagePath))]):e._e()])],1)],1)],1)],1)},V=[],D=a("75fc"),$=(a("20d6"),a("aede")),E=a("c1df"),F=a.n(E),C=a("2c82");function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function A(){var e=Object($["a"])(["\n          subscription {\n            picDeleted {\n              _id\n              title\n              imageId\n              imageFilename\n              imageBase64\n              createdDate\n              createdBy {\n                _id\n                username\n                avatar\n              }\n            }\n          }\n        "]);return A=function(){return e},e}function B(){var e=Object($["a"])(["\n          subscription {\n            picAdded {\n              _id\n              title\n              imageId\n              imageFilename\n              imageBase64\n              createdDate\n              createdBy {\n                _id\n                username\n                avatar\n              }\n            }\n          }\n        "]);return B=function(){return e},e}var q={name:"home",data:function(){return{downloadDialog:!1}},created:function(){this.handleGetALLPics()},apollo:{$subscribe:{picAdded:{query:Object(C["a"])(B()),result:function(e){var t=e.data;console.log(t.picAdded),this.pics&&this.pics.unshift(t.picAdded),this.$store.commit("setPics",this.pics)}},picDeleted:{query:Object(C["a"])(A()),result:function(e){var t=e.data;if(console.log(t.picDeleted),this.pics){var a=this.pics.findIndex(function(e){return e._id==t.picDeleted._id});if(a>=0){var n=[].concat(Object(D["a"])(this.pics.slice(0,a)),Object(D["a"])(this.pics.slice(a+1)));this.$store.commit("setPics",n)}}}}}},computed:L({},Object(i["b"])(["user","pics","downloadImagePath","loading"])),watch:{downloadImagePath:function(e){return this.downloadDialog=!0}},methods:{handleGetALLPics:function(){this.$store.dispatch("getPics")},handleDeletePic:function(e,t){this.$store.dispatch("deletePic",{picId:e,username:this.user.username,imageId:t})},formatCreatedDate:function(e){return F()(new Date(e)).format("ll")},downloadImage:function(e){if(this.$store.dispatch("downloadImage",{filename:e,username:this.user.username}),this.downloadImagePath)return this.downloadDialog=!0}}},z=q,T=a("b0af"),R=a("99d9"),G=a("12b2"),Q=a("169a"),M=a("0e8f"),J=a("adda"),N=a("ba95"),W=a("40fe"),H=a("c954"),Y=a("5d23"),K=a("490a"),X=Object(m["a"])(z,I,V,!1,null,null,null),Z=X.exports;b()(X,{VBtn:g["a"],VCard:T["a"],VCardActions:R["a"],VCardText:R["b"],VCardTitle:G["a"],VContainer:h["a"],VDialog:Q["a"],VFlex:M["a"],VIcon:j["a"],VImg:J["a"],VLayout:y["a"],VListTile:N["a"],VListTileAction:W["a"],VListTileAvatar:H["a"],VListTileContent:Y["a"],VListTileSubTitle:Y["b"],VListTileTitle:Y["c"],VProgressCircular:K["a"],VSpacer:O["a"]});var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"text-xs-center":"","mt-5":"","pt-5":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("h1",{staticClass:"accent--text"},[e._v("Get Started Here")])])],1),e.error?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("form-alert",{attrs:{message:e.error.message}})],1)],1):e._e(),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-card",{attrs:{color:"info",dark:""}},[a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.handleSignupUser(t)}},model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.usernameRules,label:"Username","prepend-icon":"face",type:"text",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"Email","prepend-icon":"email",type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.passwordRules,label:"Password","prepend-icon":"extension",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.passwordRules,label:"Confirm Password","prepend-icon":"gavel",type:"password",required:""},model:{value:e.passwordConfirmation,callback:function(t){e.passwordConfirmation=t},expression:"passwordConfirmation"}})],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{loading:e.loading,disabled:!e.isFormValid||e.loading,color:"accent",type:"submit"}},[a("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[a("v-icon",[e._v("cached")])],1),e._v("\n                  Signup\n                ")]),a("h3",[e._v("Already have an account?Alert\n                  "),a("router-link",{staticClass:"text-accent",attrs:{to:"/signin"}},[e._v("Signin")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},te=[];function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var re={name:"signup",data:function(){var e=this;return{isFormValid:!1,username:"",email:"",password:"",passwordConfirmation:"",usernameRules:[function(e){return!!e||"Username is required"},function(e){return e.length<10||"Username cannot be more than 10 characters"}],emailRules:[function(e){return!!e||"Email is required"},function(e){return/.@+./.test(e)||"Email must be valid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return e.length>=4||"Password must be at least 4 characters"},function(t){return t===e.password||"Password must match"}]}},computed:ne({},Object(i["b"])(["loading","error","user"])),watch:{user:function(e){e&&this.$router.push("/")}},methods:{handleSignupUser:function(){this.$refs.form.validate()&&this.$store.dispatch("signupUser",{username:this.username,email:this.email,password:this.password})}}},se=re,oe=(a("8d1b"),a("4bd4")),ie=a("2677"),ce=Object(m["a"])(se,ee,te,!1,null,null,null),le=ce.exports;b()(ce,{VBtn:g["a"],VCard:T["a"],VContainer:h["a"],VFlex:M["a"],VForm:oe["a"],VIcon:j["a"],VLayout:y["a"],VTextField:ie["a"]});var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"text-xs-center":"","mt-5":"","pt-5":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("h1",{staticClass:"accent--text"},[e._v("Welcome Back!")])])],1),e.error?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("form-alert",{attrs:{message:e.error.message}})],1)],1):e._e(),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-card",{attrs:{color:"primary lighten-2",dark:""}},[a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.handleSigninUser(t)}},model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.usernameRules,label:"Username","prepend-icon":"face",type:"text",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.passwordRules,label:"Password","prepend-icon":"extension",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{loading:e.loading,disabled:!e.isFormValid||e.loading,color:"accent",type:"submit"}},[a("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[a("v-icon",[e._v("cached")])],1),e._v("\n                  Signin\n                ")]),a("h3",[e._v("Don't have an account\n                  "),a("router-link",{staticClass:"text-accent",attrs:{to:"/signin"}},[e._v("Signup")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},de=[];function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pe={name:"signup",data:function(){var e=this;return{isFormValid:!1,username:"",password:"",usernameRules:[function(e){return!!e||"Username is required"},function(e){return e.length<10||"Username cannot be more than 10 characters"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return e.length>=4||"Password must be at least 4 characters"},function(t){return t===e.password||"Password must match"}]}},computed:me({},Object(i["b"])(["loading","error","user"])),watch:{user:function(e){e&&this.$router.push("/")}},methods:{handleSigninUser:function(){this.$refs.form.validate()&&this.$store.dispatch("signinUser",{username:this.username,password:this.password})}}},be=pe,ve=(a("6d1e"),Object(m["a"])(be,ue,de,!1,null,null,null)),ge=ve.exports;b()(ve,{VBtn:g["a"],VCard:T["a"],VContainer:h["a"],VFlex:M["a"],VForm:oe["a"],VIcon:j["a"],VLayout:y["a"],VTextField:ie["a"]});var he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"text-xs-center":"","mt-5":"","pt-5":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("h1",{staticClass:"primary-text"},[e._v("Add Picture")])])],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.handleAddPic(t)}},model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:e.titleRules,label:"Picture Title",type:"text",required:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),a("v-layout",[a("v-flex",[a("v-btn",{staticClass:"accent",attrs:{raised:""},on:{click:e.onPickFile}},[e._v("\n              Upload Image\n            ")]),a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1)],1),a("v-layout",[a("v-flex",[a("img",{attrs:{src:e.imageUrl,width:"300px"}})])],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{loading:e.loading,disabled:!e.isFormValid||e.loading||!e.imageUploaded,color:"accent",type:"submit"}},[a("span",{staticClass:"custom-loader",attrs:{slot:"loader"},slot:"loader"},[a("v-icon",{attrs:{light:""}},[e._v("\n                  cached\n                ")])],1),e._v("\n              Submit\n            ")])],1)],1)],1)],1)],1)],1)},je=[];function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Oe={name:"AddPic",data:function(){return{imageUploaded:!1,isFormValid:!0,imageUrl:"",title:"",titleRules:[function(e){return!!e||"Title is required"},function(e){return e.length<20||"Title must have less then 20 characters"}]}},computed:we({},Object(i["b"])(["loading","user","imageFilename","image"])),methods:{handleAddPic:function(){this.$refs.form.validate()&&this.$store.dispatch("addPic",{title:this.title,imageFilename:this.imageFilename,imageBase64:this.imageUrl,imageId:this.image.id,creatorId:this.user._id})},onPickFile:function(){return this.$refs.fileInput.click(),this.imageUploaded=!0},onFilePicked:function(e){var t=this,a=e.target.files;console.log(a);var n=a[0].name;if(n.lastIndexOf(".")<=0)return alert("Please add a valid file");a[0].type;var r=new FileReader;r.readAsDataURL(a[0]),r.addEventListener("load",function(){console.log(r.result),t.imageUrl=r.result}),this.$store.dispatch("uploadImage",{file:a[0],username:this.user.username})}}},ke=Oe,xe=Object(m["a"])(ke,he,je,!1,null,null,null),Pe=xe.exports;b()(xe,{VBtn:g["a"],VContainer:h["a"],VFlex:M["a"],VForm:oe["a"],VIcon:j["a"],VLayout:y["a"],VTextField:ie["a"]}),n["default"].use(S["a"]);var _e=new S["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:Z},{path:"/signup",name:"signup",component:le},{path:"/signin",name:"signin",component:ge},{path:"/addpic",name:"addpic",component:Pe}]}),Se=(a("96cf"),a("3b8d")),Ie=a("6ee6");function Ve(){var e=Object($["a"])(["\n          query {\n            getCurrentUser {\n              _id\n              username\n              email\n              password\n              avatar\n              joinDate\n            }\n          }"]);return Ve=function(){return e},e}function De(){var e=Object($["a"])(["\n          mutation($filename: String!, $username: String!) {\n            downloadImage(filename: $filename, username: $username) {\n              fileDir\n            }\n          }"]);return De=function(){return e},e}function $e(){var e=Object($["a"])(["\n            mutation($file: Upload!, $username: String!) {\n              uploadImage(file: $file, username: $username) {\n                id\n                filename\n                mimetype\n              }\n            }"]);return $e=function(){return e},e}function Ee(){var e=Object($["a"])(["\n            mutation($username: String!, $password: String!) {\n              signinUser(username: $username, password: $password) {\n                token\n              }\n            }"]);return Ee=function(){return e},e}function Fe(){var e=Object($["a"])(["\n          mutation($username: String!, $password: String!, $email: String!) {\n            signupUser(username: $username, password: $password, email: $email) {\n              token\n            }\n          }"]);return Fe=function(){return e},e}function Ce(){var e=Object($["a"])(["\n          query {\n            getPics {\n              _id\n              title\n              imageId\n              imageBase64\n              imageFilename\n              createdDate\n              createdBy {\n                _id\n                username\n                avatar\n              }\n            }\n          }"]);return Ce=function(){return e},e}function Ue(){var e=Object($["a"])(["\n             query {\n               getPics {\n                 _id\n                 title\n                 imageId\n                 imageBase64\n                 imageFilename\n                 createdDate\n                 createdBy {\n                   _id\n                   username\n                   avatar\n                 }\n               }\n             }"]);return Ue=function(){return e},e}function Le(){var e=Object($["a"])(["\n            mutation($picId: ID!, $username: String!) {\n              deletePic(picId: $picId, username: $username) {\n                _id\n              }\n            }"]);return Le=function(){return e},e}function Ae(){var e=Object($["a"])(["\n           query {\n             getPics {\n               _id\n               title\n               imageId\n               imageBase64\n               imageFilename\n               createdDate\n               createdBy {\n                 _id\n                 username\n                 avatar\n               }\n             }\n           }"]);return Ae=function(){return e},e}function Be(){var e=Object($["a"])(["\n            mutation(\n              $title: String!\n              $imageId: ID\n              $imageFilename: String!\n              $imageBase64: String!\n              $creatorId: ID!\n            ) {\n              addPic(\n                title: $title\n                imageId: $imageId\n                imageFilename: $imageFilename\n                imageBase64: $imageBase64\n                creatorId: $creatorId\n              ) {\n                _id\n                title\n                imageId\n                imageBase64\n                imageFilename\n                createdDate\n                createdBy {\n                  _id\n                  username\n                  avatar\n                }\n              }\n            }"]);return Be=function(){return e},e}n["default"].use(i["a"]);var qe=new i["a"].Store({state:{user:null,error:null,loading:!1,authError:null,pics:[],imageFilename:null,image:null,downloadImagePath:null},mutations:{setDownloadImagePath:function(e,t){e.downloadImagePath=t},setImage:function(e,t){e.image=t},setImageFilename:function(e,t){e.imageFilename=t},setUser:function(e,t){e.user=t},setPics:function(e,t){e.pics=t},setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t},setAuthError:function(e,t){e.authError=t},clearError:function(e){return e.error=null},clearUser:function(e){return e.user=null}},actions:{addPic:function(e,t){var a=e.commit;a("setLoading",!0),lt.mutate({mutation:Object(C["a"])(Be()),variables:t,awaitRefetchQueries:!0,refetchQueries:[{query:Object(C["a"])(Ae())}]}).then(function(e){var t=e.data;console.log(t),a("setLoading",!1),_e.push("/")}).catch(function(e){console.error(e)})},deletePic:function(e,t){Object(Ie["a"])(e),lt.mutate({mutation:Object(C["a"])(Le()),variables:t,awaitRefetchQueries:!0,refetchQueries:[{query:Object(C["a"])(Ue())}]}).catch(function(e){console.log(e)})},getPics:function(e){var t=e.commit;t("setLoading",!0),lt.query({query:Object(C["a"])(Ce())}).then(function(e){var a=e.data;console.log(a),t("setPics",a.getPics),t("setLoading",!1)}).catch(function(e){t("setLoading",!1),console.log(e)})},signupUser:function(e,t){var a=e.commit;a("clearError"),a("setLoading",!0),lt.mutate({mutation:Object(C["a"])(Fe()),variables:t}).then(function(e){var t=e.data;console.log(t),a("setLoading",!1),localStorage.setItem("token",t.signupUser.token),_e.go()}).catch(function(e){a("setLoading",!1),a("setError",e),console.log(e)})},signinUser:function(e,t){var a=e.commit;a("clearError"),a("setLoading",!0),lt.mutate({mutation:Object(C["a"])(Ee()),variables:t}).then(function(e){var t=e.data;console.log(t),a("setLoading",!1),localStorage.setItem("token",t.signinUser.token),_e.go()}).catch(function(e){a("setLoading",!1),a("setError",e)})},signoutUser:function(){var e=Object(Se["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,a("clearUser"),localStorage.setItem("token",""),e.next=5,lt.resetStore();case 5:_e.push("/");case 6:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),uploadImage:function(e,t){var a=e.commit;lt.mutate({mutation:Object(C["a"])($e()),variables:t}).then(function(e){var t=e.data;console.log(t),a("setImageFilename",t.uploadImage.filename),a("setImage",t.uploadImage)}).catch(function(e){return console.log(e)})},downloadImage:function(e,t){var a=e.commit;lt.mutate({mutation:Object(C["a"])(De()),variables:t}).then(function(e){var t=e.data;a("setDownloadImagePath",t.downloadImage.fileDir)}).catch(function(e){console.log(e)})},getCurrentUser:function(e){var t=e.commit;t("setLoading",!0),lt.query({query:Object(C["a"])(Ve())}).then(function(e){var a=e.data;console.log(a),t("setLoading",!1),t("setUser",a.getCurrentUser)})}},getters:{user:function(e){return e.user},loading:function(e){return e.loading},error:function(e){return e.error},authError:function(e){return e.authError},pics:function(e){return e.pics},image:function(e){return e.image},imageFilename:function(e){return e.imageFilename},downloadImagePath:function(e){return e.downloadImagePath}}}),ze=a("ce5b"),Te=a.n(ze);a("bf40");n["default"].use(Te.a,{theme:{primary:"#616161",secondary:"#BDBDBD",info:"#A1887F",error:"#EF5350",warning:"#FF7043",accent:"#6D4C41",success:"#388E3C"}});var Re=a("74ca"),Ge=a("2bf2"),Qe=a("cf67"),Me=a("e13b"),Je=a("d634"),Ne=a("6f47"),We=a("c0cc"),He=a("4518"),Ye=a("522d"),Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-alert",{attrs:{type:"error",value:!0,transition:"scale-transition",dismissible:""}},[a("h3",[e._v(e._s(e.message))])])},Xe=[],Ze={props:["message"]},et=Ze,tt=a("0798"),at=Object(m["a"])(et,Ke,Xe,!1,null,null,null),nt=at.exports;b()(at,{VAlert:tt["a"]}),a.d(t,"defaultClient",function(){return lt}),n["default"].use(Ye["a"]),n["default"].component("form-alert",nt);var rt=function(e){localStorage.token||localStorage.setItem("token",""),e.setContext({headers:{authorization:localStorage.getItem("token")}})},st=new Je["ApolloLink"](function(e,t){return new Ne["a"](function(a){var n;return Promise.resolve(e).then(function(e){rt(e)}).then(function(){n=t(e).subscribe({next:a.next.bind(a),error:a.error.bind(a),complete:a.complete.bind(a)})}).catch(a.error.bind(a)),function(){n&&n.unsubscribe()}})}),ot=Je["ApolloLink"].from([Object(Me["a"])(function(e){var t=e.graphQLErrors,a=e.networkError;if(t){var n=!0,r=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;console.log("[GraphQL error]: Message: ".concat(c.message,",Location: ").concat(c.locations,", Path: ").concat(c.path)),"AuthenticationError"===c.name&&(console.log(c),qe.commit("setAuthError",c),qe.dispatch("signoutUser"))}}catch(c){r=!0,s=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}}a&&console.log("[networkError]",a)}),st,new We["a"]({uri:"wss://vueload.herokuapp.com/graphql",options:{reconnect:!0,connectionParams:function(){if(localStorage.token){var e=localStorage.getItem("token");return{Authorization:e}}}}})]),it=Je["ApolloLink"].from([Object(Me["a"])(function(e){var t=e.graphQLErrors,a=e.networkError;if(t){var n=!0,r=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;console.dir(c),"AuthenticationError"===c.name&&(console.log(c.name),qe.commit("setAuthError",c),qe.dispatch("signoutUser"))}}catch(c){r=!0,s=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}}a&&console.log("[networkError",a)}),st,new Qe["createUploadLink"]({uri:"https://vueload.herokuapp.com/graphql",credentials:"include"})]),ct=Je["ApolloLink"].split(function(e){var t=e.query,a=Object(He["l"])(t),n=a.kind,r=a.operation;return"OperationDefinition"===n&&"subscription"===r},ot,it),lt=new Re["a"]({link:ct,cache:new Ge["a"]}),ut=new Ye["a"]({defaultClient:lt});n["default"].config.productionTip=!1,new n["default"]({apolloProvider:ut,router:_e,store:qe,render:function(e){return e(_)},created:function(){this.$store.dispatch("getCurrentUser")}}).$mount("#app")},"6d1e":function(e,t,a){"use strict";var n=a("4a21"),r=a.n(n);r.a},7259:function(e,t,a){},"8cd3":function(e,t,a){},"8d1b":function(e,t,a){"use strict";var n=a("7259"),r=a.n(n);r.a}});
//# sourceMappingURL=app.5d754b97.js.map